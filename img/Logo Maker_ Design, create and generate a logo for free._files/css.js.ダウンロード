function changeColor(color,luminosity){color=new String(color).replace(/[^0-9a-f]/gi,""),color.length<6&&(color=color[0]+color[0]+color[1]+color[1]+color[2]+color[2]),luminosity=luminosity||0;var c,i,newColor="#",black=0,white=255;for(i=0;3>i;i++)c=parseInt(color.substr(2*i,2),16),c=Math.round(Math.min(Math.max(black,c+luminosity*white),white)).toString(16),newColor+=("00"+c).substr(c.length);return newColor}var cc1="#"+apiVars.partner_color_1,cc2="#"+apiVars.partner_color_2,textColor="#"+apiVars.text_color,sheet=function(){var style=document.createElement("style");return style.appendChild(document.createTextNode("")),document.head.appendChild(style),style.sheet}(),addCSSRule=function(sheet,selector,rules,index){"insertRule"in sheet?sheet.insertRule(selector+"{"+rules+"}",index):"addRule"in sheet&&sheet.addRule(selector,rules,index)},hexToRgb=function(hex){var result=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);return result?{r:parseInt(result[1],16),g:parseInt(result[2],16),b:parseInt(result[3],16)}:null},idealTextColor=function(bgColor){var nThreshold=105,components=hexToRgb(bgColor),bgDelta=.299*components.r+.587*components.g+.114*components.b-10;return nThreshold>255-bgDelta?"#444444":"#ffffff"},cc1_2d=changeColor(cc1,-.03),cc1_10l=changeColor(cc1,.1),cc1_12d=changeColor(cc1,-.12),cc1_rgb=hexToRgb(cc1),cc2_2d=changeColor(cc2,-.03),cc2_5d=changeColor(cc2,-.08),cc1_text=idealTextColor(cc1),cc2_text=idealTextColor(cc2),cc2_text_shadow="#ffffff"===cc2_text?"0px 1px 4px rgba(0, 0, 0, .4)":"0px 0px 4px rgba(255, 255, 255, 1)";addCSSRule(sheet,"#nav_layer .breadcrumb a","color: "+cc1),addCSSRule(sheet,"#search_box input","color: "+cc1_10l),addCSSRule(sheet,"#lettersBtn, #shapesBtn","color: "+textColor),addCSSRule(sheet,".symbol-list ul>li>span:hover:before","background: "+cc1),addCSSRule(sheet,"#bottomPane #buttonBox1>li>a:hover","color: "+cc1),addCSSRule(sheet,"#bottomPane #buttonBox1>li>a:hover svg","fill: "+cc1+";stroke: "+cc1),addCSSRule(sheet,"#bottomPane #buttonBox2>li>a:hover svg","fill: "+cc1),addCSSRule(sheet,"#bottomPane #buttonBox3>li:last-child:hover","background: "+cc1),addCSSRule(sheet,"#bottomPane #buttonBox3>li>a:hover svg","fill: "+cc1),addCSSRule(sheet,".font-list > li.selected","background-color:rgba("+cc1_rgb.r+","+cc1_rgb.g+","+cc1_rgb.b+",.1)"),addCSSRule(sheet,".font-filter-input:focus","-moz-box-shadow:0 0 5px rgba("+cc1_rgb.r+","+cc1_rgb.g+","+cc1_rgb.b+",.5);-webkit-box-shadow:0 0 5px rgba("+cc1_rgb.r+","+cc1_rgb.g+","+cc1_rgb.b+",.5);box-shadow:0 0 5px rgba("+cc1_rgb.r+","+cc1_rgb.g+","+cc1_rgb.b+",.5)"),addCSSRule(sheet,".html5tooltip-box","background-color: "+cc2+"; color: "+cc2_text+";"),addCSSRule(sheet,".html5tooltip-text","text-shadow: "+cc2_text_shadow+";"),addCSSRule(sheet,".html5tooltip-pointer","border-color: "+cc2+";"),addCSSRule(sheet,"body","background: transparent"),addCSSRule(sheet,".popup .pop_heading","background: "+cc1_12d+";background: -moz-linear-gradient(top, "+cc1_12d+" 0%, "+cc1+" 100%);background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,"+cc1_12d+"), color-stop(100%,"+cc1+"));background: -webkit-linear-gradient(top, "+cc1_12d+" 0%,"+cc1+" 100%);background: -o-linear-gradient(top, "+cc1_12d+" 0%,"+cc1+" 100%);background: -ms-linear-gradient(top, "+cc1_12d+" 0%,"+cc1+" 100%);background: linear-gradient(to bottom, "+cc1_12d+" 0%,"+cc1+" 100%);filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='"+cc1_12d+"', endColorstr='"+cc1+"',GradientType=0 );"),addCSSRule(sheet,".popup .pop_heading h4","color: "+cc1_text),addCSSRule(sheet,".popup>span.first","border-color: "+cc1),addCSSRule(sheet,".popup #chooseBtn","border-color: "+cc2+";background: "+cc2+";color: "+cc2_text),addCSSRule(sheet,".popup #chooseBtn:hover","border-color: "+cc2_5d+";background: "+cc2_5d+";color: "+cc2_text);